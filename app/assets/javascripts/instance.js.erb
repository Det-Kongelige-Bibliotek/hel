$(document).ready(function(){
   evaluateEmbargoFields();
   $('[data-toggle="embargo_detailed"]').click(evaluateEmbargoFields);
   $('[data-function="fetch_activity_data"]').change(fetchActivityData);
});

// call the Activity show page
function fetchActivityData(){
    activity_id = $(this).val();
    activity_url = "<%= Rails.application.routes.url_helpers.administration_activities_path %>/" + activity_id + '.json';
    $.get(activity_url, function(data) {
        $.each(data, function(i, item){
            if (i == 'activity') return;
            selector = "[name*=\"" + i + "\"]";
            $(selector).val(item);
        });
    });

}

//enable the detailed embargo fields if there is an embargo
function evaluateEmbargoFields() {
    $checkbox = $('[data-toggle="embargo_detailed"]');
    $detailed = $('[data-hook="embargo_detailed"]');
    if ($checkbox.is(':checked')) {
        $detailed.attr('disabled', false);
    } else {
        $detailed.attr('disabled', true);
    }
}
