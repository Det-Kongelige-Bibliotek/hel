<!--Bibliografiske metadata -->
<a id="bibliographic"></a>
<fieldset id="bibliographic" class="row">
  <legend class="col-sm-12" >
    <%= t('.title') %>
  </legend>
  <div class="col-sm-6">
    <%= builder.input :title_statement %>
  </div>

  <div class="col-sm-6">
    <%= builder.input :isbn13 %>
  </div>

  <div class="col-sm-6">
    <%= builder.input :dimensions %>
  </div>

  <div class="col-sm-6">
    <%= builder.input :extent %>
  </div>

  <div class="col-sm-6">
    <%= builder.input :mode_of_issuance, collection: get_list_with_labels('Mode of Issuance'),  prompt: t('.udgivelsesform') %>
  </div>
  <div class="col-sm-6">
    <%= builder.input :contents_note %>
  </div>
  <div class="col-sm-6">
    <%= builder.input :note %>
  </div>
</fieldset>

<fieldset id="materialetype" class="row">
  <legend class="col-sm-12" >
    <%= t("Matelrial type") %>
  </legend>
  <div class="col-sm-6">
    <%= builder.input :material_type, collection: get_list_with_labels('Material type'),  prompt: t('.KB materialetype 1') %>

  </div>
  <div class="col-sm-6">
    <label id="material_type2_id" class="select optional" for="instance_material_type2" style="display:none">Materiale Type2</label>
    <select id="instance_material_type2" class="select optional form-control form-control" style="display:none"></select>
  </div>
</fieldset>

<fieldset>
    <legend class="col-sm-12" >
      <%= "Ophavsret:" %>
    </legend>

  <%= builder.simple_fields_for :relators do |rel_fields| %>
      <div class="row relator_fields">
        <div class="col-sm-12">
          <label class="radio-inline">
            <input type="radio" class="udloeb" name="instance[copyright_status]"  id="copyright_status" value="udloebet">Udløbet
          </label>
          <label class="radio-inline">
            <input type="radio" class="ukendt" name="instance[copyright_status]"  id="copyright_status" value="ukendt">Ukendt
          </label>
          <label class="radio-inline">
            <input type="radio" class="addagent" name="instance[copyright_status]"  id="copyright_status" value='addagent' data-toggle="copyright_fields">Agent
          </label>

        </div>
      </div>
      <div class="col-sm-12">
      <div id="addagent" class="collapse">

          <%= rel_fields.input :agent_id, collection: select_fields(Finder.all_people + Finder.all_organizations), wrapper_html: { class: 'col-sm-4' } %>
          <%= rel_fields.input :role, as: :hidden, value: 'http://id.loc.gov/vocabulary/relators/cph' %>
          <%= builder.simple_fields_for :publications do |f| %>
              <div class="col-sm-4">
                <%= f.input :copyright_date %>
              </div>
          <% end %>
        </div>
      </div>

  <% end %>

</fieldset>


<script type="text/javascript">
  printlist = <%= raw get_list_with_labels('Print') %> ;
  printlist.unshift(["Tryk","Tryk"]);
  manuscriptslist = <%= raw get_list_with_labels('Manuscripts') %>;
  manuscriptslist.unshift(["Håndskrifter","Håndskrifter"]);
  musicmanuscriptslist = <%= raw get_list_with_labels('Music_Manuscripts') %>;
  musicmanuscriptslist.unshift(["Musikhåndskrifter","Musikhåndskrifter"]);
  imageslist = <%= raw get_list_with_labels('Images') %>;
  imageslist.unshift(["Billeder","Billeder"]);
  maplist = <%= raw get_list_with_labels('Map') %>;
  maplist.unshift(["Kort","Kort"]);
  musicprintlist = <%= raw get_list_with_labels('Music_Print') %>;
  musicprintlist.unshift(["Musiktryk","Musiktryk"]);

  myCategories = {
      'tryk' : ['tryksager','Tidsskrifter',''],
      'håndskrifter': ['','',''],
      'lyd': []
  }

  function myOnSelectChange(selectElem) {
        var selectedItem = selectElem.options[selectElem.selectedIndex].value;
        if (selectedItem === 'Images') {
            $('#instance_material_type2').html($.map(imageslist, function (option) {
                return '<option value="' + option[0] + '">' + option[0] + '</option>';
            }).join(''));
            $('#material_type2_id').show();
            $('#instance_material_type2').show();
        } else if (selectedItem === 'Print') {
            $('#instance_material_type2').html($.map(printlist, function (option) {
                return '<option value="' + option[0] + '">' + option[0] + '</option>';
            }).join(''));
            $('#material_type2_id').show();
            $('#instance_material_type2').show();
        } else if (selectedItem === 'Manuscripts') {
            $('#instance_material_type2').html($.map(manuscriptslist, function (option) {
                return '<option value="' + option[0] + '">' + option[0] + '</option>';
            }).join(''));
            $('#material_type2_id').show();
            $('#instance_material_type2').show();
        } else if (selectedItem === 'Music Manuscripts') {
            $('#instance_material_type2').html($.map(musicmanuscriptslist, function (option) {
                return '<option value="' + option[0] + '">' + option[0] + '</option>';
            }).join(''));
            $('#material_type2_id').show();
            $('#instance_material_type2').show();
        } else if (selectedItem === 'Map') {
            $('#instance_material_type2').html($.map(maplist, function (option) {
                return '<option value="' + option[0] + '">' + option[0] + '</option>';
            }).join(''));
            $('#material_type2_id').show();
            $('#instance_material_type2').show();
        } else if (selectedItem === 'Music Print') {
            $('#instance_material_type2').html($.map(musicprintlist, function (option) {
                return '<option value="' + option[0] + '">' + option[0] + '</option>';
            }).join(''));
            $('#material_type2_id').show();
            $('#instance_material_type2').show();
        } else {
            $('#material_type2_id').hide();
            $('#instance_material_type2').hide();
        }
  }

  $(document).ready(function () {

      $('#instance_material_type').change(function(){ myOnSelectChange(this); });
      myOnSelectChange($('#instance_material_type')[0]);
  });
</script>