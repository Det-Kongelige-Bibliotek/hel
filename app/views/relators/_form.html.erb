<% remote ||= false %>

<%= builder.simple_fields_for :relators, defaults: { wrapper_html: { class: 'form-group' },
                                                       input_html: { class: 'form-control' }
                                         } do |rel_fields| %>
    <% id = "#{id}_#{rel_fields.index }" %>
    <div id="<%= id %>" class="row relator_fields">
      <a class="btn btn-sm btn-error col-sm-offset-11" href="#" data-function="delete-fields" data-target="#<%=id %>">
        <span class="glyphicon glyphicon-minus"></span>
        <%= delete_label %>
      </a>
      <div class="col-sm-12">
        <div class="input string optional work_relators_agent_name col-sm-6">
          <label class="string optional" for="<%= id %>_agent_label">Agent Navn</label>
          <input class="string optional form-control agent-typeahead" name="work[blah][]" id="<%= id %>_agent_label" type="text">
        </div>
        <%= rel_fields.hidden_field :agent_id %>
        <%= rel_fields.hidden_field :_destroy %>
        <%= rel_fields.input :role, collection: get_list_with_labels('Relators'), input_html: { class: 'combobox'}, wrapper_html: { class: 'col-sm-2' }  %>
      </div>
    </div>
<% end %>